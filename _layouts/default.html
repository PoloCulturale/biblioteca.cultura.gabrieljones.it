<!DOCTYPE html>
<html lang="{{ page.lang | default: site.lang | default: "en" }}">
  <head>
    
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    
    <title>{{ site.title }}{% if page.title and page.title != "" %} &mdash; {{ page.title }}{% endif %}</title>
<script>
    if (!isAuthenticated) {
  window.location.href = '/';
  return;
}
  </script>
    {% if site.description %}<meta name="description" content="{{ site.description }}">{% endif %}  

    <link rel="stylesheet" href="{{ '/assets/css/main.css' | absolute_url }}?{{ site.time | date: '%s%N' }}">

      <script src="https://cdn.auth0.com/js/auth0-spa-js/1.13/auth0-spa-js.production.js"></script>
    <link rel="apple-touch-icon" href="https://gjd.altervista.org/wp-content/uploads/2024/09/cropped-Black_Beige_Circle_Y2K_Illustrative_Class_Logo-removebg-preview.png">

    {%- if jekyll.environment == 'production' and site.google_analytics -%}
      {%- include google-analytics.html -%}
    {%- endif -%}
<!-- Cookie Consent by TermsFeed https://www.TermsFeed.com -->
<script type="text/javascript" src="//www.termsfeed.com/public/cookie-consent/4.2.0/cookie-consent.js" charset="UTF-8"></script>
<script type="text/javascript" charset="UTF-8">
document.addEventListener('DOMContentLoaded', function () {
cookieconsent.run({"notice_banner_type":"interstitial","consent_type":"express","palette":"dark","language":"it","page_load_consent_levels":["strictly-necessary"],"notice_banner_reject_button_hide":false,"preferences_center_close_button_hide":false,"page_refresh_confirmation_buttons":false,"website_name":"Culture Section | Gabriel Jones"});
});
</script>

  </head>
  <body>

    {% if page.layout == 'home' %}
      <a href="#main" class="skip-navigation">
        Skip to list of posts
      </a>
    {% else %}
      <a href="#main" class="skip-navigation">
        Skip to content
      </a>
    {% endif %}
  <header class="site-masthead">
    {% include menu.html %}
    {% if site.title %}
      <h1>
        {{ site.title }}
      </h1>
    {% endif %}
    {% if site.title %}
      <h2>
        {{ site.description }}
      </h2>
    {% endif %}
  </header>
    {{ content }}
        {% include risorse.html %}
    {% unless site.hide_search %}
      {% include search.html %}
    {% endunless %}
      <button id="login-btn" onclick="login()">Login</button>

    {% include menu.html %}

    {% unless site.hide_credits %}
      <aside class="site-credits">
        <p>
          <small>Creato da<a href="https://gabrieljones.it">Gabriel Jones .it</a> e gestito da <a href="https://onlygabbyme.substack.com/">onlygabbyme</a> basandosi sul tema jekyll <a href="https://github.com/patdryburgh/hitchens">hitchens</a></small>
        </p>
      </aside>
    {% endunless %}

<a href="#" id="open_preferences_center">Update cookies preferences</a>
<script>
  document.addEventListener("DOMContentLoaded", async () => {
    const auth0 = await createAuth0Client({
      domain: 'dev-f3c6xbgc2ncptfvi.us.auth0.com',
      client_id: 'o1mzuH9F1cz7PgLuq9q8Qkg4EZ7xcoiF'
    });

    const isAuthenticated = await auth0.isAuthenticated();

    if (!isAuthenticated) {
      window.location.href = '/'; // Reindirizza se non autenticato
      return;
    }

    const user = await auth0.getUser();
    document.getElementById('user-name').innerText = user.name;
    document.getElementById('user-profile').style.display = 'block';
  });
</script>


  <script>
    document.addEventListener("DOMContentLoaded", async () => {
      const auth0 = await createAuth0Client({
        domain: 'dev-f3c6xbgc2ncptfvi.us.auth0.com',
        client_id: 'o1mzuH9F1cz7PgLuq9q8Qkg4EZ7xcoiF'
      });

      const isAuthenticated = await auth0.isAuthenticated();
      document.getElementById('login-btn').style.display = isAuthenticated ? 'none' : 'inline';

      window.login = async () => {
        await auth0.loginWithRedirect({ redirect_uri: window.location.origin });
      };

      window.logout = () => {
        auth0.logout({ returnTo: window.location.origin });
      };
    });
  </script>
  </body>
</html>
